<?php

/**
 * School Theme BCIT functions and definitions
 *
 * @link https://developer.wordpress.org/themes/basics/theme-functions/
 *
 * @package School_Theme_BCIT
 */

get_header();
?>

<main id="primary" class="site-main">
    <header class="page-header">
        <?php
        echo '<h1 class="page-title">The Class</h1>';
        ?>
    </header><!-- .page-header -->
    <?php
    $args = array(
        'post_type' => 'school-student',
        'posts_per_page' => -1,
        'tax_query' => array(
            array(
                'taxonomy' => 'school-student-category',
                'field' => 'slug',
                'terms' => 'web'
            )
        ),
    );
    $query = new WP_Query($args);
    if ($query->have_posts()) {
        echo '<section><h2>' . esc_html__('Web Projects', 'fwd') . '</h2>';
        while ($query->have_posts()) {
            $query->the_post();
    ?>
            <article>
                <a href="<?php the_permalink(); ?>">
                    <h2><?php the_title(); ?></h2>
                    <?php the_post_thumbnail('thumbnail'); ?>
                </a>
                <?php the_excerpt(); ?>
            </article>
    <?php
        }
        wp_reset_postdata();
        echo '</section>';
    }
    ?>
</main><!-- #primary -->

<?php
get_footer();
